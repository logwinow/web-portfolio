# Получение курса валют

Приложение соблюдает условия использования API ЦБ РФ ([https://www.cbr-xml-daily.ru/#terms](https://www.cbr-xml-daily.ru/#terms)), а именно:  
* не больше 5 запросов в секунду;  
* не больше 120 запросов в минуту;  
* не больше 10000 запросов в сутки.  

Приложение осуществляет не более 1 запроса в секунду и не более 10000 запросов в сутки.  
Также число запросов сокращается за счёт отлова наиболее типичных ошибок, связанных с неправильно заданным промежутком и неправильным ID валюты.

## Маршруты
### /get_currencies
Данный маршрут реализует получение курсов всех валют на текущий день.

### /get_currency/<val_code>/<day_start>.<month_start>.<year_start>/<day_end>.<month_end>.<year_end>
Данный маршрут реализует получение курса конкретной валюты за конкретный промежуток времени.
<val_code> - код валюты  
<day_start> - день начала промежутка  
<month_start> - месяц начала промежутка  
<year_start> - год начала промежутка  
<day_end> - день конца промежутка  
<month_end> - месяц конца промежутка  
<year_end> - год конца промежутка  

Пример маршрута: /get_currency/R01235/10.12.2022/10.01.2023

## Сборка и развёртывание приложения

Пайплайн состоит из двух стадий: lint и build-and-deploy.

Перед сборкой производится линтинг кода с помощью Flake8.

Сборка заключается в создании Docker-контейнера, который загружается на Docker Hub. При этом производится обновление приложения на удалённом сервере.

Этапы сборки и развёртывания:

- подключение к Docker Hub,

- настройка инструмента сборки Docker Buildx,

- сборка контейнера и загрузка образа на Docker Hub,

- добаление SSH-ключа для доступа к удалённому серверу,

- копирование скрипта для развёртывания приложения на удалённый сервер,

- запуск скрипта на удалённом сервере.

Скрипт для развёртывания deploy.sh выполняет следующие операции:

- загрузка новой версии образа с Docker Hub,

- остановка и удаление контейнера,

- запуск контейнера с новой версией приложения.
